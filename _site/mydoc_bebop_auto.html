<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>mydoc_bebop_auto.md - Grip</title>
  <link rel="icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAKCgr/FRUX/xYWGP8YGBr/GRkb/xsbHP8dHR7/Hh4f/x4eIP8fHyD/ICAh/yMjJP8kJCX/JiYo/ygoKv8pKSr/LCwu/y0tLv80NDT/QUFC/0ZGR/9MTE7/UFBR/1JSUv9bW1v/XFxc/2BgYP9hYWP/aGhp/2xsbP9ycnL/d3d3/3l5e/98fHz/f3+A/2dn/P9z3a//cNX8/4CAgP+Xl5f/nZ2e/56en/+fn5//n5+h/6amp/+rq6v/rKys/7CvsP+zs7T/uLi5/7u7u/+8vLz/wMDA/8fHx//Kysr/zc3N/9HR0f/d3d3/3t7e/+Xl5f/q6ur/6+vr/+3t7f/z8/P/9fX1//b29v/39/f/+Pj4//n5+f/6+vr/+/v7//z8/P/9/f3//v7+//////8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/NCYmJiYmJiYmJiYmJiYmNCZKSkpKSkpKSkpKSkpKSiYmSkpKRisdRkMbMklKSkomJkpKSSEiNUhEEQwpSUpKJiZKSi8LHhhAPAwBDDZKSiYmSkoWACA7SEc6HAEaSkomJkpKBxI/SkpKSj4ICkpKJiZKSgUTR0pKSkpGDwZKSiYmSkoTED1KSkpKOQQVSkomJkpKKgowMy4sNycIMUpKJiZKSkEZDgkDAgsNH0VKSiYmSkpKQigUBgkXLUhKSkomJkpKSkpKSkpKSkpKSkpKJiYmJiYmJiYmJiYmJiYmJiYmIyUkNDQ0NDQ0NDQ0NDQmOCYmJiYmJiYmJiYmJiYmOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=" />
  <link rel="stylesheet" href="//octicons.github.com/components/octicons/octicons/octicons.css" />
  <style>
    /* Page tweaks */
    .preview-page {
      margin-top: 64px;
    }
    /* User-content tweaks */
    .timeline-comment-wrapper > .timeline-comment:after,
    .timeline-comment-wrapper > .timeline-comment:before {
      content: none;
    }
    /* User-content overrides */
    .discussion-timeline.wide {
      width: 920px;
    }
  </style>
</head>
<body>
  <div class="page">
    <div id="preview-page" class="preview-page" data-autorefresh-url="">

    

      <div role="main" class="main-content">
        <div class="container new-discussion-timeline experiment-repo-nav">
          <div class="repository-content">
            <div id="readme" class="readme boxed-group clearfix announce instapaper_body md">
              
                <h3>
                  <span class="octicon octicon-book"></span>
                  mydoc_bebop_auto.md - Grip
                </h3>
              
              <article class="markdown-body entry-content" itemprop="text" id="grip-content">
                <hr>
<h2>
<a id="user-content-title-bebop-rossidebar-mydoc_sidebarpermalink-mydoc_bebop_automd" class="anchor" href="#title-bebop-rossidebar-mydoc_sidebarpermalink-mydoc_bebop_automd" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>title: Bebop ROS
sidebar: mydoc_sidebar
permalink: mydoc_bebop_auto.md</h2>
<hr>
<p>bebop_autonomy - ROS Driver for Parrot Bebop Drone (quadrocopter) 1.0 &amp; 2.0</p>
<hr>
<p><em>bebop_autonomy</em> is a :abbr:<code>ROS (Robot Operating System)</code> driver for <code>Parrot Bebop 1.0 &lt;http://www.parrot.com/ca/products/bebop-drone/&gt;</code>_ and <code>2.0 &lt;https://www.parrot.com/ca/drones/parrot-bebop-2&gt;</code>_ drones (quadrocopters), based on Parrot's official <code>ARDroneSDK3 &lt;http://developer.parrot.com/docs/SDK3/&gt;</code><em>. This driver has been developed in <code>Autonomy Lab &lt;http://autonomylab.org/&gt;</code></em> of <code>Simon Fraser University &lt;http://www.sfu.ca/&gt;</code>_ by <code>Mani Monajjemi &lt;http://mani.im&gt;</code>_ and other contributers (:ref:<code>sec-contribs</code>). This software is maintained by <code>Sepehr MohaimenianPour &lt;http://sepehr.im/&gt;</code>_ (AutonomyLab, Simon Fraser University), <code>Thomas Bamford &lt;#&gt;</code>_ (Dynamic Systems Lab, University of Toronto) and <code>Tobias Naegeli &lt;https://ait.ethz.ch/people/naegelit/&gt;</code>_ (Advanced Interactive Technologies Lab, ETH ZÃ¼rich).</p>
<p>[<code>Source Code &lt;https://github.com/AutonomyLab/bebop_autonomy&gt;</code><em>]
[<code>ROS wiki page &lt;http://wiki.ros.org/bebop_autonomy&gt;</code></em>]
[<code>Support &lt;http://answers.ros.org/questions/scope:all/sort:activity-desc/tags:bebop_autonomy/page:1/&gt;</code><em>]
[<code>Bug Tracker &lt;https://github.com/AutonomyLab/bebop_autonomy/issues&gt;</code></em>]</p>
<p>.. _sec-roadmap:</p>
<h1>
<a id="user-content-features-and-roadmap" class="anchor" href="#features-and-roadmap" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features and Roadmap</h1>
<p>.. csv-table::
:header: "Feature", "Status", "Notes"</p>
<p>SDK Version,"3.12.6", "Since v0.7"
Support for Parrot Bebop 1, Yes, "Tested up to Firmware 3.3"
Support for Parrot Bebop 2, Yes, "Tested up to Firmware 4.0.6"
Support for Parrot Disco FPV, No, "Not tested (help wanted)"
Core piloting, Yes, ""
H264 video decoding, Yes, "Enhancement: <code>#1 &lt;https://github.com/AutonomyLab/bebop_autonomy/issues/1&gt;</code><em>"
ROS Camera Interface, Yes, ""
Nodelet implementation, Yes, ""
Publish Bebop states as ROS topics, Yes, ""
Dynamically reconfigurable Bebop settings, Yes, ":ref:<code>sec-dev-dyn</code>"
Use <code>parrot_arsdk &lt;https://github.com/AutonomyLab/parrot_arsdk&gt;</code></em> instead of building ARSDK3 inline, Yes, "Since v0.6: <code>#75 &lt;https://github.com/AutonomyLab/bebop_autonomy/issues/75&gt;</code>_"
Bebop In The Loop tests, Yes, ":ref:<code>sec-dev-test</code>"
Joystick teleop demo, Yes, ":ref:<code>sec-pilot-teleop</code>"
TF Publisher, Yes, "Since v0.5 (:ref:<code>sec-tf</code>)"
Odometry Publisher, Yes, "Since v0.5 (:ref:<code>sec-odom</code>)"
Provide ROS API for on-board picture/video recording, Yes, "Since v0.4.1 (:ref:<code>sec-snapshot</code>)"
GPS Support, Yes, "Since v0.6 (:ref:<code>sec-gps</code>)"
Support for 720p streaming, Yes, "Since v0.6"
Mavlink Support, No, ""
Binary Release, No, ""
Support for Parrot Sky Controller, No, ""</p>
<h1>
<a id="user-content-table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Table of Contents</h1>
<p>.. toctree::
:maxdepth: 2</p>
<p>changelog
installation
running
piloting
reading
configuration
coordinates
contribute
FAQ
dev
license</p>
<h1>
<a id="user-content-indices-and-tables" class="anchor" href="#indices-and-tables" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Indices and tables</h1>
<ul>
<li>:ref:<code>genindex</code>
</li>
<li>:ref:<code>modindex</code>
</li>
<li>:ref:<code>search</code>
</li>
</ul>
<hr>
<hr>
<hr>
<p>Installation</p>
<hr>
<h1>
<a id="user-content-compiling-from-source" class="anchor" href="#compiling-from-source" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Compiling From Source</h1>
<p>Pre-requirements:</p>
<ul>
<li>ROS <em>Indigo</em>, <em>Jade</em> or <em>Kinetic</em> (Only tested on <em>Ubuntu</em>)</li>
<li>Ubuntu packages: <code>build-esstential</code>, <code>python-rosdep</code>, <code>python-catkin-tools</code>
</li>
<li>Basic familiarity with building ROS packages</li>
</ul>
<p>.. code-block:: bash</p>
<p>$ sudo apt-get install build-essential python-rosdep python-catkin-tools</p>
<p>To compile from source, you need to clone the source code in a new or existing <code>catkin</code> workspace, use <code>rosdep</code> to install dependencies and finally compile the workspace using <code>catkin</code>. The following commands demonstrate this procedure in a newly created <code>catkin</code> workspace.</p>
<p>.. note:: Since version 0.6, <code>Parrot ARSDK &lt;http://developer.parrot.com/docs/SDK3/&gt;</code><em>, the main underlying dependency of  <em>bebop_autonomy</em> is not build inline anymore. Instead, the slightly patched and catkinized version of it, called <code>parrot_arsdk &lt;https://github.com/AutonomyLab/parrot_arsdk&gt;</code></em>, is fetched as a dependency during the <code>rosdep install</code> step below. This dramatically decreases the compile time of the package compared to previous versions (e.g. from ~15 minutes to less than a minute on a modern computer). If you are re-compiling from source, you need to clean your workspace first: <code>$ catkin clean [-y]</code>.</p>
<p>.. code-block:: bash</p>
<h1>
<a id="user-content-create-and-initialize-the-workspace" class="anchor" href="#create-and-initialize-the-workspace" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Create and initialize the workspace</h1>
<p>$ mkdir -p ~/bebop_ws/src &amp;&amp; cd ~/bebop_ws
$ catkin init
$ git clone <a href="https://github.com/AutonomyLab/bebop_autonomy.git">https://github.com/AutonomyLab/bebop_autonomy.git</a> src/bebop_autonomy</p>
<h1>
<a id="user-content-update-rosdep-database-and-install-dependencies-including-parrot_arsdk" class="anchor" href="#update-rosdep-database-and-install-dependencies-including-parrot_arsdk" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update rosdep database and install dependencies (including parrot_arsdk)</h1>
<p>$ rosdep update
$ rosdep install --from-paths src -i</p>
<h1>
<a id="user-content-build-the-workspace" class="anchor" href="#build-the-workspace" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Build the workspace</h1>
<p>$ catkin build</p>
<hr>
<hr>
<hr>
<p>Running the Driver</p>
<hr>
<p>You can run Bebop's ROS drivereither as a ROS <code>Nodelet &lt;http://wiki.ros.org/nodelet&gt;</code>_ or as a standalone ROS Node. The former is recommended if you intend to perform any kind of processing on Bebop's video stream.</p>
<p>.. note:: If you compile the driver form source, do not forget to source your catkin workspace prior to running the driver. (i.e. <code>source ~/bebop_ws/devel/setup.[bash|zsh]</code>)</p>
<p>.. note:: Ensure that your Bebop's firmware is at least <strong>2.0.29</strong> and your computer is connected to Bebop's wireless network.</p>
<h1>
<a id="user-content-running-the-driver-as-a-node" class="anchor" href="#running-the-driver-as-a-node" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Running the driver as a Node</h1>
<p>The executable node is called <code>bebop_driver_node</code> and exists in <code>bebop_driver</code> package. It's recommended to run the Node in its own namespace and with default configuration. The driver package comes with a sample launch file <code>bebop_driver/launch/bebop_node.launch</code> which demonstrates the procedure.</p>
<p>.. code-block:: bash</p>
<p>$ roslaunch bebop_driver bebop_node.launch</p>
<p>.. literalinclude::
../bebop_driver/launch/bebop_node.launch
:language: XML
:caption: bebop_node.launch</p>
<h1>
<a id="user-content-running-the-driver-as-a-nodelet" class="anchor" href="#running-the-driver-as-a-nodelet" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Running the driver as a Nodelet</h1>
<p>To run the driver as a ROS Nodelet, you need to first run a Nodelet manager, then load the driver's Nodelet (<code>bebop_driver/BebopDriverNodelet</code>) in it, along with other Nodelets that need to communicate with the driver. <code>bebop_tools/launch/bebop_nodelet_iv.launch</code> is a sample launch file that demonstrates these steps by visualizing Bebop's video stream using an instance of <code>image_view/image &lt;http://wiki.ros.org/image_view#image_view.2BAC8-diamondback.image_view.2BAC8-image&gt;</code>_ Nodelet. Similar to <code>bebop_node.launch</code>, it also runs everything in its own namespace and loads the default configuration.</p>
<p>.. code-block:: bash</p>
<p>$ roslaunch bebop_tools bebop_nodelet_iv.launch</p>
<p>.. literalinclude::
../bebop_tools/launch/bebop_nodelet_iv.launch
:language: XML
:caption: bebop_tools/launch/bebop_nodelet_iv.launch</p>
<p>.. literalinclude::
../bebop_driver/launch/bebop_nodelet.launch
:language: XML
:caption: bebop_driver/launch/bebop_nodelet.launch</p>
  <hr>
  <hr>
<hr>
<p>Sending Commands to Bebop</p>
<hr>
<p>.. _sec-pilot-teleop:</p>
<p>.. note:: <code>bebop_tools</code> package comes with a launch file for tele-operating Bebop with a joystick using ROS <code>joy_teleop &lt;http://wiki.ros.org/joy_teleop&gt;</code>_ package. The configuration file (key-action map) is written for <code>Logitech F710 controller &lt;http://gaming.logitech.com/en-ca/product/f710-wireless-gamepad&gt;</code>_ and is located in <code>bebop_tools/config</code> folder. Adapting the file to your own controller is straightforward. To teleop Bebop while the driver is running execute <code>roslaunch bebop_tools joy_teleop.launch</code>.</p>
<h1>
<a id="user-content-takeoff" class="anchor" href="#takeoff" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Takeoff</h1>
<p>Publish a message of type <code>std_msgs/Empty</code> to <code>takeoff</code> topic.</p>
<p>.. code-block:: bash</p>
<p>$ rostopic pub --once [namespace]/takeoff std_msgs/Empty</p>
<h1>
<a id="user-content-land" class="anchor" href="#land" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Land</h1>
<p>Publish a message of type <code>std_msgs/Empty</code> to <code>land</code> topic.</p>
<p>.. code-block:: bash</p>
<p>$ rostopic pub --once [namespace]/land std_msgs/Empty</p>
<h1>
<a id="user-content-emergency" class="anchor" href="#emergency" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Emergency</h1>
<p>Publish a message of type <code>std_msgs/Empty</code> to <code>reset</code> topic.</p>
<p>.. code-block:: bash</p>
<p>$ rostopic pub --once [namespace]/reset std_msgs/Empty</p>
<h1>
<a id="user-content-piloting" class="anchor" href="#piloting" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Piloting</h1>
<p>To move Bebop around, publish messages of type <code>geometry_msgs/Twist &lt;http://docs.ros.org/api/geometry_msgs/html/msg/Twist.html&gt;</code>_ to <code>cmd_vel</code> topic while Bebop is flying. The effect of each field of the message on Bebop's movement is listed below:</p>
<p>.. code-block:: text</p>
<p>linear.x  (+)      Translate forward
(-)      Translate backward
linear.y  (+)      Translate to left
(-)      Translate to right
linear.z  (+)      Ascend
(-)      Descend
angular.z (+)      Rotate counter clockwise
(-)      Rotate clockwise</p>
<p>Acceptable range for all fields are <code>[-1..1]</code>. The drone executes the last received command as long as the driver is running. This command is reset to zero when Takeoff_, Land_ or Emergency_ command is received. To make Bebop hover and maintain its current position, you need to publish a message with all fields set to zero to <code>cmd_vel</code>.</p>
<p>The <code>linear.x</code> and <code>linear.y</code> parts of this message set the <strong>pitch</strong> and <strong>roll</strong> angles of the Bebop, respectively, hence control its forward and lateral accelerations. The resulting pitch/roll angles depend on the value of <code>~PilotingSettingsMaxTiltCurrent</code> <code>parameter &lt;./autogenerated/ardrone3_settings_param.html#pilotingsettingsmaxtiltcurrent&gt;</code>_, which is specified in degrees and is dynamically reconfigurable (:ref:<code>sec-dyn-params</code>).</p>
<p>The <code>linear.z</code> part of this message controls the <strong>vertical velocity</strong> of the Bebop. The resulting velocity in m/s depends on the value of <code>~SpeedSettingsMaxVerticalSpeedCurrent</code> <code>parameter &lt;./autogenerated/ardrone3_settings_param.html#speedsettingsmaxverticalspeedcurrent&gt;</code><em>, which is specified in meters per second and is also dynamically reconfigurable (:ref:<code>sec-dyn-params</code>). Similarly, the <code>angular.z</code> component of this message controls the rotational velocity of the Bebop (around the z-axis). The corresponding scaling <code>parameter &lt;./autogenerated/ardrone3_settings_param.html#speedsettingsmaxrotationspeedcurrent&gt;</code></em> is <code>SpeedSettingsMaxRotationSpeedCurrent</code> (in degrees per sec).</p>
<p>.. code-block:: text</p>
<p>roll_degree       = linear.y  * max_tilt_angle
pitch_degree      = linear.x  * max_tilt_angle
ver_vel_m_per_s   = linear.z  * max_vert_speed
rot_vel_deg_per_s = angular.z * max_rot_speed</p>
<h1>
<a id="user-content-moving-the-virtual-camera" class="anchor" href="#moving-the-virtual-camera" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Moving the Virtual Camera</h1>
<p>To move Bebop's virtual camera, publish a message of type <code>geometry_msgs/Twist &lt;http://docs.ros.org/api/geometry_msgs/html/msg/Twist.html&gt;</code>_ to <code>camera_control</code> topic. <code>angular.y</code> and <code>angular.z</code> fields of this message set <strong>absolute</strong> tilt and pan of the camera in <strong>degrees</strong> respectively. The field of view of this virtual camera (based on our measurements) is ~80 (horizontal) and ~50 (vertical) degrees.</p>
<p>.. warning:: The API for this command is not stable. We plan to use <code>JointState</code> message in future versions.</p>
<p>.. code-block:: text</p>
<p>angular.y (+)      tilt down
(-)      tilt up
angular.z (+)      pan left
(-)      pan right</p>
<h1>
<a id="user-content-gps-navigation" class="anchor" href="#gps-navigation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>GPS Navigation</h1>
<h2>
<a id="user-content-start-flight-plan" class="anchor" href="#start-flight-plan" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Start Flight Plan</h2>
<p>An autonomous flight plan consists of a series of GPS waypoints along with Bebop velocities and camera angles encoded in an XML file.</p>
<p>Requirements that must be met before an autonomous flight can start:</p>
<pre><code>* Bebop is calibrated
* Bebop is in outdoor mode
* Bebop has fixed its GPS
</code></pre>
<p>To start an autonomous flight plan, publish a message of type <code>std_msgs/String &lt;http://docs.ros.org/api/std_msgs/html/msg/String.html&gt;</code>_ to <code>autoflight/start</code> topic. The <code>data</code> field should contain the name of the flight plan to execute, which is already stored on-board Bebop.</p>
<p>.. note:: If an empty string is published, then the default 'flightplan.mavlink' is used.</p>
<p>.. warning:: If not already flying, Bebop will attempt to take off upon starting a flight plan.</p>
<p>The <code>Flight Plan App &lt;https://play.google.com/store/apps/details?id=com.parrot.freeflight3&gt;</code>_ allows easy construction of flight plans and saves them on-board Bebop.</p>
<p>An FTP client can also be used to view and copy flight plans on-board Bebop. <code>FileZilla</code> is recommended:</p>
<p>.. code-block:: bash</p>
<p>$ sudo apt-get install filezilla
$ filezilla</p>
<p>Then open <code>Site Manager</code> (top left), click <code>New Site</code>:</p>
<pre><code>* `Host`: 192.168.42.1
* `Protocol`: FTP
* `Encrpytion`: Use plain FTP
* `Logon Type`: Anonymous
* Connect.
</code></pre>
<h2>
<a id="user-content-pause-flight-plan" class="anchor" href="#pause-flight-plan" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pause Flight Plan</h2>
<p>To pause the execution of an autonomous flight plan, publish a message of type <code>std_msgs/Empty &lt;http://docs.ros.org/api/std_msgs/html/msg/Empty.html&gt;</code>_ to <code>autoflight/pause</code> topic. Bebop will then hover and await further commands.
To resume a paused flight plan, publish the same message that was used to start the autonomous flight (ie. to the topic <code>autoflight/start</code>). Bebop will fly to the lastest waypoint reached before continuing the flight plan.</p>
<p>.. note:: Any velocity commands sent to Bebop during an autonomous flight plan will pause the plan.</p>
<h2>
<a id="user-content-stop-flight-plan" class="anchor" href="#stop-flight-plan" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Stop Flight Plan</h2>
<p>To stop the execution of an autonomous flight plan, publish a message of type <code>std_msgs/Empty &lt;http://docs.ros.org/api/std_msgs/html/msg/Empty.html&gt;</code>_ to <code>autoflight/stop</code> topic. Bebop will hover and await further commands.</p>
<h2>
<a id="user-content-navigate-home" class="anchor" href="#navigate-home" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Navigate Home</h2>
<p>To ask Bebop to autonomously fly to it's home position, publish a message of type <code>std_msgs/Bool &lt;http://docs.ros.org/api/std_msgs/html/msg/Bool.html&gt;</code>_ to <code>autoflight/navigate_home</code> topic with the <code>data</code> field set to <code>true</code>. To stop Bebop from navigating home, publish another message with <code>data</code> set to <code>false</code>.</p>
<p>.. warning:: The topic has changed from <code>navigate_home</code> to <code>autoflight/navigate_home</code> after version 0.5.1.</p>
<h1>
<a id="user-content-flat-trim" class="anchor" href="#flat-trim" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Flat Trim</h1>
<p>.. error:: Test fails, probably not working.</p>
<p>Publish a message of type <code>std_msgs/Empty</code> to <code>flattrim</code> topic.</p>
<p>.. code-block:: bash</p>
<p>$ rostopic pub --once [namespace]/flattrim std_msgs/Empty</p>
<h1>
<a id="user-content-flight-animations" class="anchor" href="#flight-animations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Flight Animations</h1>
<p>.. warning:: Be extra cautious when performing any flight animations, specially in indoor environments.</p>
<p>Bebop can perform four different types of flight animation (flipping). To perform an animation, publish a message of type <code>std_msgs/UInt8</code> to <code>flip</code> topic while drone is flying. The <code>data</code> field determines the requested animation type.</p>
<p>.. code-block:: text</p>
<p>0       Flip Forward
1       Flip Backward
2       Flip Right
3       Flip Left</p>
<p>.. _sec-snapshot:</p>
<h1>
<a id="user-content-take-on-board-snapshot" class="anchor" href="#take-on-board-snapshot" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Take on-board Snapshot</h1>
<p>.. versionadded:: 0.4.1</p>
<p>To take a high resolution on-board snapshot, publish a <code>std_msgs/Empty</code> message on <code>snapshot</code> topic. The resulting snapshot is stored on the internal storage of the Bebop. The quality and type of this image is not configurable using the ROS driver. You can use the official FreeFlight3 app to configure your Bebop prior to flying. To access the on-board media, either connect your Bebop over USB to a computer, or use a FTP client to connect to your Bebop using the following settings:</p>
<ul>
<li>Default IP: <code>192.168.42.1</code>
</li>
<li>Port: <code>21</code>
</li>
<li>Path: <code>internal_000/Bebop_Drone/media</code>
</li>
<li>Username: <code>anonymous</code>
</li>
<li>Password: <em></em>
</li>
</ul>
<h1>
<a id="user-content-set-camera-exposure" class="anchor" href="#set-camera-exposure" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Set camera exposure</h1>
<p>It is possible to set camera exposure by publishing <code>std_msgs/Float32</code> message on <code>set_exposure</code> topic. Note that this functionality is not supported in Bebop1 Fw 3.3.0.</p>
<ul>
<li>Exposure value range: <code>-3.0 .. +3.0</code>
</li>
</ul>
<h1>
<a id="user-content-toggle-on-board-video-recording" class="anchor" href="#toggle-on-board-video-recording" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Toggle on-board Video Recording</h1>
<p>.. versionadded:: 0.4.1</p>
<p>To start or stop on-board high-resolution video recording, publish a <code>std_msgs/Bool</code> message on the <code>record</code> topic. The value of <code>true</code> starts the recording while the value of <code>false</code> stops it. Please refer to the previous section for information on how to access the on-board recorded media.</p>
<hr>
<hr>
<hr>
<p>Reading from Bebop</p>
<hr>
<h1>
<a id="user-content-camera" class="anchor" href="#camera" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Camera</h1>
<p>The video stream from Bebop's front camera is published on <code>image_raw</code> topic as <code>sensor_msgs/Image</code> messages. <em>bebop_driver</em> complies with ROS camera interface specifications and publishes camera information and calibration data to <code>camera_info</code> topic. Due to limitations in Parrot's ARDroneSDK3, the quality of video stream is limited to <strong>640 x 368 @ 30 Hz</strong>. The field of view of this virtual camera (based on our measurements) is ~80 (horizontal) and ~50 (vertical) degrees.</p>
<p>To set the location of camera calibration data, please check this page: :doc:<code>configuration</code>. Since v0.4, the package ships with a default camera caliberation file located at <code>bebop_driver/data/bebop_front_calib.yaml</code>. Both default node/nodelet launch files, load this file when executing the driver.</p>
<p>.. _sec-ros-topic:</p>
<h1>
<a id="user-content-standard-ros-messages" class="anchor" href="#standard-ros-messages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Standard ROS messages</h1>
<p>.. _sec-odom:</p>
<h2>
<a id="user-content-odometery" class="anchor" href="#odometery" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Odometery</h2>
<p>.. versionadded:: 0.5</p>
<ul>
<li>ROS Topic: <code>odom</code>
</li>
<li>ROS Message Type: <code>nav_msgs/Odometry</code>
</li>
</ul>
<p>The driver integerates visual-inertial velocity estimates reported by Bebop's firmware to calculate the odometery. This message contains both the position and velocity of the Bebop in an ENU aligned odometery frame also named as <code>odom</code>. This frame name is configurable (see :ref:<code>sec-params</code>) The cooridnate frame convention complies with ROS REP 103 (:ref:<code>sec-coords</code>). Please not that since odometery is calculated from Bebop States (see :ref:<code>sec-states</code>), the update rate is limited to <strong>5 Hz</strong>.</p>
<p>.. _sec-gps:</p>
<h2>
<a id="user-content-gps" class="anchor" href="#gps" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>GPS</h2>
<p>.. versionadded:: 0.5</p>
<ul>
<li>ROS Topic: <code>fix</code>
</li>
<li>ROS Message Type: <code>sensor_msgs/NavSatFix</code>
</li>
</ul>
<h2>
<a id="user-content-joint-states-pantilt-of-the-virtual-camera" class="anchor" href="#joint-states-pantilt-of-the-virtual-camera" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Joint States (Pan/Tilt of The Virtual Camera)</h2>
<p>.. versionadded:: 0.5</p>
<ul>
<li>ROS Topic: <code>joint_states</code>
</li>
<li>ROS Message Type: <code>sensor_msgs/JointState</code>
</li>
</ul>
<p>.. _sec-tf:</p>
<h1>
<a id="user-content-tf" class="anchor" href="#tf" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TF</h1>
<p>.. versionadded:: 0.5</p>
<p>The driver updates the following <code>TF &lt;http://wiki.ros.org/tf&gt;</code>_ tree based on a simple kinematic model of the Bebop (provided by <code>bebop_description</code>) pacakge, the current state of the virtual camera joints and the calculated odometery (if <code>publish_odom_tf</code> is set, see :ref:<code>sec-params</code>).</p>
<p>.. image:: img/tf.png</p>
<p>.. _sec-states:</p>
<p><a href="https://github.com/AutonomyLab/bebop_autonomy/raw/indigo-devel/docs/img/tf.png" target="_blank" rel="noopener noreferrer"><img src="https://github.com/AutonomyLab/bebop_autonomy/raw/indigo-devel/docs/img/tf.png" alt="odom_tf" style="max-width:100%;"></a>
States (aka Navdata)</p>
<p>====================</p>
<p>Unlike Parrot ARDrone, Bebop does not constantly transmit all on-board data back to the host device with high frequency. Each state variable is sent only when its value is changed. In addition, the publication rate is currently limited to <strong>5 Hz</strong>. The driver publishes these states <strong>selectively</strong> and when <strong>explicitly</strong> enabled through a ROS parameter. For example setting <code>~states/enable_pilotingstate_flyingstatechanged</code> parameter to <code>true</code> will enable the publication of flying state changes to topic <code>states/ARDrone3/PilotingState/FlyingStateChanged</code>. List of all such parameters and their corresponding topics and message types are indexed in the following pages:</p>
<p>Common States
:doc:<code>autogenerated/common_states_param_topic</code>
Bebop-specific States
:doc:<code>autogenerated/ardrone3_states_param_topic</code></p>
<hr>
<hr>
<hr>
<p>Configuring Bebop and the Driver</p>
<hr>
<p>.. _sec-params:</p>
<h1>
<a id="user-content-driver-parameters" class="anchor" href="#driver-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Driver Parameters</h1>
<p>Following parameters are set during driver's startup:</p>
<h2>
<a id="user-content-bebop_ip" class="anchor" href="#bebop_ip" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>~bebop_ip</h2>
<p>Sets the IP addres of the Bebop. The default value is <code>192.168.42.1</code>.</p>
<h2>
<a id="user-content-reset_settings" class="anchor" href="#reset_settings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>~reset_settings</h2>
<p>Setting this parameter to <code>true</code> will reset all Bebop configurations to factory defaults. Default value is <code>false</code>.</p>
<h2>
<a id="user-content-sync_time" class="anchor" href="#sync_time" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>~sync_time</h2>
<p>Setting this parameter to <code>true</code> will synchronize drone time with your ROS system time. Default value is <code>false</code>.</p>
<h2>
<a id="user-content-camera_info_url" class="anchor" href="#camera_info_url" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>~camera_info_url</h2>
<p>Sets the location of the camera calibration data. Default is empty string. For more information check <code>this documentation &lt;http://wiki.ros.org/camera_info_manager#URL_Names&gt;</code>_.</p>
<p>.. note::</p>
<p>Since v0.4, the package comes with a default camera calibration file located at <code>bebop_driver/data/bebop_front_calib.yaml</code>.</p>
<h2>
<a id="user-content-cmd_vel_timeout" class="anchor" href="#cmd_vel_timeout" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>~cmd_vel_timeout</h2>
<p>.. versionadded:: 0.4</p>
<p>Sets the safety timeout for piloting <code>cmd_vel</code> commands in seconds. Deafult is set to <strong>0.1</strong> seconds (100 miliseconds). If no piloting command is received by the driver within this timeout period, the driver issues a stop command which causes the drone to hover.</p>
<h2>
<a id="user-content-odom_frame_id" class="anchor" href="#odom_frame_id" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>~odom_frame_id</h2>
<p>.. versionadded:: 0.5</p>
<p>Sets the <code>frame_id</code> of the odometery message (see :ref:<code>sec-ros-topic</code>) and the odometery frame used in the TF tree (see :ref:<code>sec-tf</code>). The default value is <code>odom</code>.</p>
<h2>
<a id="user-content-publish_odom_tf" class="anchor" href="#publish_odom_tf" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>~publish_odom_tf</h2>
<p>.. versionadded:: 0.5</p>
<p>Enables the publishing of <code>odom</code> to <code>base_link</code> TF transform (see :ref:<code>sec-tf</code>). The default value is <code>true</code>.</p>
<h2>
<a id="user-content-camera_frame_id" class="anchor" href="#camera_frame_id" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>~camera_frame_id</h2>
<p>.. deprecated:: 0.5</p>
<p>Sets the <code>frame_id</code> of camera and image messages. The default value is <code>camera_optical</code>.</p>
<p>.. _sec-dyn-params:</p>
<h1>
<a id="user-content-dynamically-reconfigurable-parameters-for-bebop" class="anchor" href="#dynamically-reconfigurable-parameters-for-bebop" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dynamically Reconfigurable Parameters for Bebop</h1>
<p>Following ROS parameters change Bebop's settings. They can be tweaked during runtime using <code>dynamic reconfigure GUI &lt;http://wiki.ros.org/dynamic_reconfigure#dynamic_reconfigure.2BAC8-groovy.reconfigure_gui&gt;</code><em>. Setting <code>~reset_settings</code></em> parameter to <code>true</code> will reset all these settings to factory defaults.</p>
<p>:doc:<code>autogenerated/ardrone3_settings_param</code></p>
<hr>
<hr>
<hr>
<p>Coordinate System Conventions</p>
<hr>
<p>.. _sec-coords:</p>
<h1>
<a id="user-content-ros-standard-message-types-ie-twist-odometery---rep-103" class="anchor" href="#ros-standard-message-types-ie-twist-odometery---rep-103" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ROS Standard Message Types (i.e Twist, Odometery) - REP 103</h1>
<p>+x    forward
+y    left
+z    up
+yaw  CCW</p>
<ul>
<li>More information: <a href="http://www.ros.org/reps/rep-0103.html" rel="nofollow">http://www.ros.org/reps/rep-0103.html</a>
</li>
</ul>
<h1>
<a id="user-content-bebop-velocities" class="anchor" href="#bebop-velocities" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bebop Velocities</h1>
<p>+x    East
+y    South
+z    Down</p>
<h1>
<a id="user-content-bebop-attitude" class="anchor" href="#bebop-attitude" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bebop Attitude</h1>
<p>+x    forward
+y    right
+z    down
+yaw  CW</p>
<h1>
<a id="user-content-sdks-setpilotingpcmd" class="anchor" href="#sdks-setpilotingpcmd" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>SDK's setPilotingPCMD</h1>
<p>+roll   right
+pitch  forward
+gaz    up
+yaw    CW</p>
<hr>
<hr>
<hr>
<p>Under The Hood</p>
<hr>
<p>This page contains information about the architecture of the driver and different techniques used for its development.</p>
<h1>
<a id="user-content-automatic-code-generation" class="anchor" href="#automatic-code-generation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Automatic Code Generation</h1>
<p>TBA</p>
<h1>
<a id="user-content-threading-model" class="anchor" href="#threading-model" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Threading Model</h1>
<p>TBA</p>
<h1>
<a id="user-content-publishing-the-states" class="anchor" href="#publishing-the-states" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Publishing the States</h1>
<p>TBA</p>
<p>.. _sec-dev-dyn:</p>
<h1>
<a id="user-content-configuring-the-drone" class="anchor" href="#configuring-the-drone" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuring the Drone</h1>
<p>TBA</p>
<p>.. _sec-dev-test:</p>
<h1>
<a id="user-content-tests" class="anchor" href="#tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tests</h1>
<h2>
<a id="user-content-enabling-bebop-in-the-loop-tests" class="anchor" href="#enabling-bebop-in-the-loop-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Enabling Bebop In The Loop Tests</h2>
<p>.. code-block:: bash</p>
<p>$ cd /path/to/bebop_ws
$ catkin clean --cmake-cache
$ catkin build bebop_driver --cmake-args -DRUN_HARDWARE_TESTS=ON</p>
<h2>
<a id="user-content-running-bebop-in-the-loop-tests" class="anchor" href="#running-bebop-in-the-loop-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Running Bebop In The Loop Tests</h2>
<p>.. warning:: Bebop in the loop tests perform live unit tests with a real robot. Please proceed with caution and execute the tests in an area with at least 5 meters of clearance radius (empty space) around the Bebop.</p>
<p>.. code-block:: bash</p>
<p>$ cd /path/to/bebop_ws/build/bebop_driver
$ make tests
$ rostest --text bebop_driver bebop_itl_test.test</p>
<h1>
<a id="user-content-upgrading-the-bebop-sdk" class="anchor" href="#upgrading-the-bebop-sdk" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Upgrading the Bebop SDK</h1>
<p>.. warning:: Since version 0.6, <code>Parrot ARSDK &lt;http://developer.parrot.com/docs/SDK3/&gt;</code><em>, the main underlying dependency of  <em>bebop_autonomy</em> is not build inline anymore. Instead, the slightly patched and catkinized version of it, called <code>parrot_arsdk &lt;https://github.com/AutonomyLab/parrot_arsdk&gt;</code></em>, is fetched as a dependency. <strong>The following documentation needs to be updated</strong>.</p>
<ol>
<li>Update the <code>GIT_TAG</code> of <code>ARDroneSDK3</code> in <code>bebop_driver/CMakeLists.txt::add_custom_target::./repo init ... -b GIT_TAG</code> to your desired commit hash, branch or tag (release). The official upstream repository is hosted <code>here &lt;https://github.com/Parrot-Developers/arsdk_manifests&gt;</code>_.</li>
<li>Checkout (or browse) the upstream repository at the same hash used in step (1) and open <code>release.xml</code> file. From this file, extract the commit hash of <code>arsdk-xml</code> from the <code>revision</code> property of this XML tag: <code>&lt;project name="arsdk-xml" ... revision="" /&gt;</code>.</li>
<li>Open <code>bebop_driver/scripts/meta/generate.py</code> and update <code>LIBARCOMMANDS_GIT_HASH</code> variable to the hash obtained in step (2).</li>
<li>Change the working diretory to <code>bebop_driver/scripts/meta</code>, then execute <code>generate.py</code> from the command line. This will regenerate all automatically generated message definitions, header files and documentations.</li>
<li>Copy the generated files to their target locations by calling <code>./install.sh</code>.</li>
<li>In <code>bebop_driver/include/bebop_driver/autogenerated/ardrone3_setting_callbacks.h</code> change the following varialbles:</li>
</ol>
<ul>
<li>
<code>ARCONTROLLER_DICTIONARY_KEY_ARDRONE3_PILOTINGSETTINGSSTATE_MAXDISTANCECHANGED_VALUE</code> to <code>ARCONTROLLER_DICTIONARY_KEY_ARDRONE3_PILOTINGSETTINGSSTATE_MAXDISTANCECHANGED_CURRENT</code>.</li>
<li>
<code>ARCONTROLLER_DICTIONARY_KEY_ARDRONE3_PILOTINGSETTINGSSTATE_BANKEDTURNCHANGED_VALUE</code> to <code>ARCONTROLLER_DICTIONARY_KEY_ARDRONE3_PILOTINGSETTINGSSTATE_BANKEDTURNCHANGED_STATE</code>
</li>
<li>
<code>ARCONTROLLER_DICTIONARY_KEY_ARDRONE3_PILOTINGSETTINGSSTATE_CIRCLINGRADIUSCHANGED_VALUE</code> to <code>ARCONTROLLER_DICTIONARY_KEY_ARDRONE3_PILOTINGSETTINGSSTATE_CIRCLINGRADIUSCHANGED_CURRENT</code>
</li>
<li>
<code>ARCONTROLLER_DICTIONARY_KEY_ARDRONE3_PILOTINGSETTINGSSTATE_CIRCLINGALTITUDECHANGED_VALUE</code> to <code>ARCONTROLLER_DICTIONARY_KEY_ARDRONE3_PILOTINGSETTINGSSTATE_CIRCLINGALTITUDECHANGED_CURRENT</code>
</li>
</ul>
<p>In <code>bebop_driver/include/bebop_driver/autogenerated/ardrone3_state_callbacks.h</code> remove the following lines:</p>
<p><code>arg = NULL; HASH_FIND_STR (arguments, ARCONTROLLER_DICTIONARY_KEY_ARDRONE3_ACCESSORYSTATE_CONNECTEDACCESSORIES_LIST_FLAGS, arg); if (arg) { msg_ptr-&gt;list_flags = arg-&gt;value.U8; }</code></p>
<p>In <code>bebop_msgs/msg/autogenerated/Ardrone3AccessoryStateConnectedAccessories.msg</code> remove the following lines:
<code># List entry attribute Bitfield. 0x01: First: indicate its the first element of the list. 0x02: Last: indicate its the last element of the list. 0x04: Empty: indicate the list is empty (implies First/Last). All other arguments should be ignored. 0x08: Remove: This value should be removed from the existing list. uint8 list_flags</code></p>
<p>These changes are required because the upstream XML file is inconsistent for a couple of variable names.</p>
<ol start="7">
<li>Remove <code>build</code> and <code>devel</code> space of your <code>catkin</code> workspace, then re-build it.</li>
</ol>

              </article>
            </div>
          </div>
        </div>
      </div>

    

  </div>
  <div>&nbsp;</div>
  </div><script>
    function showCanonicalImages() {
      var images = document.getElementsByTagName('img');
      if (!images) {
        return;
      }
      for (var index = 0; index < images.length; index++) {
        var image = images[index];
        if (image.getAttribute('data-canonical-src') && image.src !== image.getAttribute('data-canonical-src')) {
          image.src = image.getAttribute('data-canonical-src');
        }
      }
    }

    function scrollToHash() {
      if (location.hash && !document.querySelector(':target')) {
        var element = document.getElementById('user-content-' + location.hash.slice(1));
        if (element) {
           element.scrollIntoView();
        }
      }
    }

    function autorefreshContent(eventSourceUrl) {
      var initialTitle = document.title;
      var contentElement = document.getElementById('grip-content');
      var source = new EventSource(eventSourceUrl);
      var isRendering = false;

      source.onmessage = function(ev) {
        var msg = JSON.parse(ev.data);
        if (msg.updating) {
          isRendering = true;
          document.title = '(Rendering) ' + document.title;
        } else {
          isRendering = false;
          document.title = initialTitle;
          contentElement.innerHTML = msg.content;
          showCanonicalImages();
        }
      }

      source.onerror = function(e) {
        if (e.readyState === EventSource.CLOSED && isRendering) {
          isRendering = false;
          document.title = initialTitle;
        }
      }
    }

    window.onhashchange = function() {
      scrollToHash();
    }

    window.onload = function() {
      scrollToHash();
    }

    showCanonicalImages();

    var autorefreshUrl = document.getElementById('preview-page').getAttribute('data-autorefresh-url');
    if (autorefreshUrl) {
      autorefreshContent(autorefreshUrl);
    }
  </script>
</body>
</html>